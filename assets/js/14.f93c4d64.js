(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{431:function(e,t,a){e.exports=a.p+"assets/img/xhci-path.9ea32874.png"},432:function(e,t,a){e.exports=a.p+"assets/img/deviceproperties.c89d2c51.png"},433:function(e,t,a){e.exports=a.p+"assets/img/usbw.5e2e6a44.png"},468:function(e,t,a){"use strict";a.r(t);var o=a(25),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"keyboard-wake-issues"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#keyboard-wake-issues"}},[e._v("#")]),e._v(" Keyboard Wake Issues")]),e._v(" "),o("p",[e._v("So an odd bug with Intel's 100 series chipsets and newer is that sometimes macOS requires a second keyboard press or some other wake event to power up the monitor as well, with some requiring a keypress+power button to wake. Well to fix this, we need to either:")]),e._v(" "),o("ul",[o("li",[e._v("Disable Darkwake(not ideal, as background tasks will also turn on the display)")]),e._v(" "),o("li",[e._v("Set "),o("code",[e._v("acpi-wake-type")]),e._v(" to the USB Controller(Recommended)")]),e._v(" "),o("li",[e._v("Create a fake ACPI Device")])]),e._v(" "),o("p",[e._v("You can find a great write up on the whole situation and the fixes here: "),o("a",{attrs:{href:"https://osy.gitbook.io/hac-mini-guide/details/usb-fix",target:"_blank",rel:"noopener noreferrer"}},[e._v("USB Fix"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v("It's an excellent read and highly recommend to truly understand "),o("em",[e._v("what")]),e._v(" is exactly happening, and it's not like you've done enough reading already with this guide ;p")]),e._v(" "),o("h4",{attrs:{id:"method-1-add-wake-type-property-recommended"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#method-1-add-wake-type-property-recommended"}},[e._v("#")]),e._v(" Method 1 - Add Wake Type Property (Recommended)")]),e._v(" "),o("p",[e._v("So the ideal method is to declare the XHCI Controller(This is our USB Controller) to be an ACPI wake device, as we don't have compatible ECs for macOS to handle proper wake calls.")]),e._v(" "),o("p",[e._v("To start,  we'll need to grab the PciRoot of our USB Controller(we'll use "),o("a",{attrs:{href:"https://github.com/acidanthera/gfxutil/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("gfxutil"),o("OutboundLink")],1),e._v(", Generally the names would be XHC, XHC1 and XHCI)")]),e._v(" "),o("p",[o("img",{attrs:{src:a(431),alt:""}})]),e._v(" "),o("p",[e._v("Now with the PciRoot, open your config.plist and add a new entry under DeviceProperties -> Add, and add your PciRoot. Then create a child with the following attributes:")]),e._v(" "),o("p",[o("code",[e._v("acpi-wake-type | Data | <01>")])]),e._v(" "),o("p",[o("img",{attrs:{src:a(432),alt:""}})]),e._v(" "),o("h4",{attrs:{id:"method-2-create-a-fake-acpi-device"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#method-2-create-a-fake-acpi-device"}},[e._v("#")]),e._v(" Method 2 - Create a fake ACPI Device")]),e._v(" "),o("p",[e._v("This method creates a fake ACPI Device that will be associated with the GPE, then add the property of "),o("code",[e._v("acpi-wake-type")]),e._v(" with USBWakeFixup.kext.")]),e._v(" "),o("p",[e._v("It's actually quite easy to setup, you'll need the following:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://github.com/osy86/USBWakeFixup/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("USBWakeFixup.kext"),o("OutboundLink")],1),e._v(" "),o("ul",[o("li",[e._v("Both under EFI/OC/Kexts and your config..plist")])])]),e._v(" "),o("li",[o("a",{attrs:{href:"https://github.com/osy86/USBWakeFixup/blob/master/SSDT-USBW.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-USBW.dsl"),o("OutboundLink")],1)])]),e._v(" "),o("p",[e._v("To create the SSDT-USBW for your specific system, you're gonna need the ACPI path of your USB controller. If we look back above to the gfxutil example, we can see it also lists our ACPI path:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("/PC00@0/XHCI@14")]),e._v(" -> "),o("code",[e._v("\\_SB.PC00.XHCI")])])]),e._v(" "),o("p",[e._v("Now we can shove that into our SSDT:")]),e._v(" "),o("p",[o("img",{attrs:{src:a(433),alt:""}})]),e._v(" "),o("p",[e._v("Now with that done, you can compile and add it to your EFI and config.plist. See "),o("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/Manual/compile.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Getting Started With ACPI"),o("OutboundLink")],1),e._v(" for more info on compiling SSDTs")])])}),[],!1,null,null,null);t.default=r.exports}}]);