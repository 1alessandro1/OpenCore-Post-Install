<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fixing CFG Lock | OpenCore Post-Install</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="&#39;stylesheet" href="/OpenCore-Post-Install/styles/website.css">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/OpenCore-Post-Install/assets/css/0.styles.54998e6c.css" as="style"><link rel="preload" href="/OpenCore-Post-Install/assets/js/app.8a972eff.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/2.1f2b73b4.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/17.4b483982.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/28.a0dc0ef4.js" as="script"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/10.c2b2f449.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/11.75e4a439.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/12.372f3fd4.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/13.6fd2ccb2.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/14.4a2bb6f0.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/15.b9777c9a.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/16.053812ac.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/18.79947336.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/19.4f935b47.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/20.2e342c64.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/21.9a92af8f.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/22.1e859f71.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/23.b029f242.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/24.f2e7e8ce.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/25.8d44a9fe.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/26.e25bde63.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/27.aa247907.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/29.559efe04.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/3.82daa3c3.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/30.0154dc30.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/31.0a92cde2.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/32.5bfca490.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/33.0a4e25b4.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/34.779adef6.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/35.e767b955.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/36.cb6e1fc5.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/37.28dbbdf3.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/4.d0888c6d.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/5.a8b6d8de.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/6.e30afd94.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/7.f680a8d2.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/8.7ca841ed.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/9.6e89554e.js">
    <link rel="stylesheet" href="/OpenCore-Post-Install/assets/css/0.styles.54998e6c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenCore-Post-Install/" class="home-link router-link-active"><img src="/OpenCore-Post-Install/homepage.png" alt="OpenCore Post-Install" class="logo"> <span class="site-name can-hide">OpenCore Post-Install</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dortania Guides" class="dropdown-title"><span class="title">Dortania Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dortania.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/OpenCore-Desktop-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore Install Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Getting Started With ACPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GPU Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Wireless Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Anti Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/dortania/OpenCore-Post-Install" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dortania Guides" class="dropdown-title"><span class="title">Dortania Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dortania.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/OpenCore-Desktop-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore Install Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Getting Started With ACPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GPU Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Wireless Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Anti Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/dortania/OpenCore-Post-Install" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/" aria-current="page" class="sidebar-link">OpenCore Post-Install</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Universal</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/universal/security.html" class="sidebar-link">Security and FileVault</a></li><li><a href="/OpenCore-Post-Install/universal/audio.html" class="sidebar-link">Fixing Audio</a></li><li><a href="/OpenCore-Post-Install/universal/oc2hdd.html" class="sidebar-link">Booting without USB</a></li><li><a href="/OpenCore-Post-Install/universal/update.html" class="sidebar-link">Updating OpenCore, kexts and macOS</a></li><li><a href="/OpenCore-Post-Install/universal/drm.html" class="sidebar-link">Fixing DRM</a></li><li><a href="/OpenCore-Post-Install/universal/iservices.html" class="sidebar-link">Fixing iServices</a></li><li><a href="/OpenCore-Post-Install/universal/pm.html" class="sidebar-link">Fixing Power Management</a></li><li><a href="/OpenCore-Post-Install/universal/sleep.html" class="sidebar-link">Fixing Sleep</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>USB Fixes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/usb/" class="sidebar-link">USB Mapping: Introduction</a></li><li><a href="/OpenCore-Post-Install/usb/system-preparation.html" class="sidebar-link">System Preparation</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>USB Mapping</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Miscellaneous Fixes</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Laptop Specifics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/laptop-specific/battery.html" class="sidebar-link">Fixing Battery Read-outs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Cosmetics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/cosmetic/verbose.html" class="sidebar-link">Fixing Resolution and Verbose</a></li><li><a href="/OpenCore-Post-Install/cosmetic/gui.html" class="sidebar-link">Add GUI and Boot-chime</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Multiboot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/multiboot/bootstrap.html" class="sidebar-link">Setting up Bootstrap.efi</a></li><li><a href="/OpenCore-Post-Install/multiboot/bootcamp.html" class="sidebar-link">Installing BootCamp</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/misc/rtc.html" class="sidebar-link">Fixing RTC</a></li><li><a href="/OpenCore-Post-Install/misc/msr-lock.html" aria-current="page" class="active sidebar-link">Fixing CFG Lock</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/misc/msr-lock.html#what-is-cfg-lock" class="sidebar-link">What is CFG-Lock</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/misc/msr-lock.html#disabling-cfg-lock" class="sidebar-link">Disabling CFG Lock</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/misc/msr-lock.html#checking-if-cfg-lock-can-be-turned-off" class="sidebar-link">Checking if CFG-Lock can be turned off</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/misc/msr-lock.html#turning-off-cfg-lock-manually" class="sidebar-link">Turning off CFG-Lock manually</a></li></ul></li><li><a href="/OpenCore-Post-Install/misc/nvram.html" class="sidebar-link">Emulated NVRAM</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-succinct-content content__default"><h1 id="fixing-cfg-lock"><a href="#fixing-cfg-lock" class="header-anchor">#</a> Fixing CFG Lock</h1> <ul><li>Supported version: 0.5.9</li></ul> <p><extoc></extoc></p> <p>Do note that this is only recommended for users who have already installed macOS, for users who are installing for the first time enable <code>AppleCpuPmCfgLock</code> and <code>AppleXcpmCfgLock</code> under <code>Kernel -&gt; Quirks</code></p> <h2 id="what-is-cfg-lock"><a href="#what-is-cfg-lock" class="header-anchor">#</a> What is CFG-Lock</h2> <p>CFG-Lock is a setting in your BIOS that allows for a specific register(in this case the MSR 0xE2) to be written to. By default, most motherboards lock this variable with many even hiding the option outright in the GUI. And why we care about it is that macOS actually wants to write to this variable, and not just one part of macOS. Instead both the Kernel(XNU) and AppleIntelPowerManagement want this register.</p> <p>So to fix it we have 2 options:</p> <ol><li>Patch macOS to work with our hardware</li></ol> <ul><li>This creates instability and unnecessary patching for many</li> <li>The 2 patches we use for this:
<ul><li><code>AppleCpuPmCfgLock</code> for AppleIntelPowerManagement.kext</li> <li><code>AppleXcpmCfgLock</code> for the Kernel(XNU)</li></ul></li></ul> <ol start="2"><li>Patch our firmware to support MSR E2 write</li></ol> <ul><li>Very much preferred, as avoids patching allowing for greater flexibility regarding stability and OS upgrades</li></ul> <p>Note: Penyrn based machines actually don't need to worry about unlocking this register</p> <h2 id="disabling-cfg-lock"><a href="#disabling-cfg-lock" class="header-anchor">#</a> Disabling CFG Lock</h2> <p>So you've installed macOS but you're using those pesky <code>CFG-Lock</code> patches that we want to get rid of, well to do this is fairly simple. You'll need the following:</p> <p>Inside your EFI/OC/Tools folder and config.plist:</p> <ul><li><a href="https://github.com/acidanthera/OpenCorePkg/releases" target="_blank" rel="noopener noreferrer">VerifyMsrE2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/datasone/grub-mod-setup_var/releases" target="_blank" rel="noopener noreferrer">Modified GRUB Shell<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>And some apps to help us out:</p> <ul><li><a href="https://github.com/LongSoft/UEFITool/releases" target="_blank" rel="noopener noreferrer">UEFITool<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (Make sure it's UEFITool and not UEFIExtrac)</li> <li><a href="https://github.com/LongSoft/Universal-IFR-Extractor/releases" target="_blank" rel="noopener noreferrer">Universal-IFR-Extractor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>And don't forget to disable the following from your config.plist under <code>Kernel -&gt; Quirks</code>:</p> <ul><li><code>AppleCpuPmCfgLock</code></li> <li><code>AppleXcpmCfgLock</code></li></ul> <p>And the final part, grabbing your BIOS from the vendors' website.</p> <p>Now the fun part!</p> <h2 id="checking-if-cfg-lock-can-be-turned-off"><a href="#checking-if-cfg-lock-can-be-turned-off" class="header-anchor">#</a> Checking if CFG-Lock can be turned off</h2> <p>Boot OpenCore and select the <code>VerifyMsrE2</code> option in the picker. This tool will tell you whether your BIOS supports CFG-Lock and if it can be unlocked.</p> <h2 id="turning-off-cfg-lock-manually"><a href="#turning-off-cfg-lock-manually" class="header-anchor">#</a> Turning off CFG-Lock manually</h2> <ol><li>Open your firmware with UEFITool and then find <code>CFG Lock</code> as a Unicode string. If nothing pops up then your firmware doesn't support <code>CFG Lock</code>, otherwise continue on.</li></ol> <p><img src="/OpenCore-Post-Install/assets/img/uefi-tool.5f61054a.png" alt=""></p> <ol><li><p>You'll find that this string is found within a Setup folder, right-click and export as <code>Setup.bin</code></p></li> <li><p>Open your setup file with <code>ifrextract</code> and export as a .txt file with terminal:</p> <div class="language- extra-class"><pre class="language-text"><code>path/to/ifrextract path/to/Setup.bin path/to/Setup.txt
</code></pre></div></li> <li><p>Open the text file and search for <code>CFG Lock, VarStoreInfo (VarOffset/VarName):</code> and note the offset right after it(ie: <code>0x5A4</code>)</p></li></ol> <p><img src="/OpenCore-Post-Install/assets/img/cfg-find.cf3041e6.png" alt=""></p> <ol><li><p>Run the Modified GRUB Shell and paste the following where <code>0x5A4</code> is replaced with your value:</p> <div class="language- extra-class"><pre class="language-text"><code>setup_var 0x5A4 0x00
</code></pre></div><p>Do note that variable offsets are unique not just to each motherboard but even to its firmware version. <strong>Never try to use an offset without checking.</strong></p></li></ol> <p>And you're done! Now you'll have correct CPU power management</p> <p><strong>Note</strong>: Every time you reset your BIOS you will need to flip this bit again, make sure to write it down with the BIOS version so you know which.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/13/2020, 8:21:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ⟵
      <a href="/OpenCore-Post-Install/misc/rtc.html" class="prev">
        Fixing RTC
      </a></span> <span class="next"><a href="/OpenCore-Post-Install/misc/nvram.html">
        Emulated NVRAM
      </a>
      ⟶
    </span></p></div> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div><!----></div></div>
    <script src="/OpenCore-Post-Install/assets/js/app.8a972eff.js" defer></script><script src="/OpenCore-Post-Install/assets/js/2.1f2b73b4.js" defer></script><script src="/OpenCore-Post-Install/assets/js/17.4b483982.js" defer></script><script src="/OpenCore-Post-Install/assets/js/28.a0dc0ef4.js" defer></script>
  </body>
</html>
