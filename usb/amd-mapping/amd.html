<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>USB Mapping | OpenCore Post-Install</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="&#39;stylesheet" href="/OpenCore-Post-Install/styles/website.css">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/OpenCore-Post-Install/assets/css/0.styles.54998e6c.css" as="style"><link rel="preload" href="/OpenCore-Post-Install/assets/js/app.02766a6e.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/2.a6c1b66e.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/3.d6f68cc8.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/28.32d25b57.js" as="script"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/10.0142a97b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/11.9c7fa74b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/12.43cbced4.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/13.c83fce6b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/14.e78d09ff.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/15.ab693084.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/16.9518c95f.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/17.5002961b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/18.c8d9d356.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/19.348f9251.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/20.b23f00fc.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/21.6b554871.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/22.7f4129e3.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/23.dbb52980.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/24.c36acc78.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/25.0868fdcc.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/26.5997a916.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/27.74ddd901.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/29.c54847b5.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/30.4f6fe97f.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/31.f6f7c083.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/32.dbcb21bd.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/33.c0489543.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/34.1ea34831.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/35.29ad4cb2.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/36.eecef22c.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/37.0a2f43dc.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/4.f66f4fd2.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/5.26e60485.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/6.75f5f74d.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/7.0508aec3.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/8.e1c5b34e.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/9.fb6557c8.js">
    <link rel="stylesheet" href="/OpenCore-Post-Install/assets/css/0.styles.54998e6c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenCore-Post-Install/" class="home-link router-link-active"><img src="/OpenCore-Post-Install/homepage.png" alt="OpenCore Post-Install" class="logo"> <span class="site-name can-hide">OpenCore Post-Install</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dortania Guides" class="dropdown-title"><span class="title">Dortania Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dortania.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/OpenCore-Desktop-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore Install Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Getting Started With ACPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GPU Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Wireless Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Anti Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/dortania/OpenCore-Post-Install" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dortania Guides" class="dropdown-title"><span class="title">Dortania Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dortania.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/OpenCore-Desktop-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore Install Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Getting Started With ACPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GPU Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Wireless Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Anti Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/dortania/OpenCore-Post-Install" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/" aria-current="page" class="sidebar-link">OpenCore Post-Install</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Universal</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/universal/security.html" class="sidebar-link">Security and FileVault</a></li><li><a href="/OpenCore-Post-Install/universal/audio.html" class="sidebar-link">Fixing Audio</a></li><li><a href="/OpenCore-Post-Install/universal/oc2hdd.html" class="sidebar-link">Booting without USB</a></li><li><a href="/OpenCore-Post-Install/universal/update.html" class="sidebar-link">Updating OpenCore, kexts and macOS</a></li><li><a href="/OpenCore-Post-Install/universal/drm.html" class="sidebar-link">Fixing DRM</a></li><li><a href="/OpenCore-Post-Install/universal/iservices.html" class="sidebar-link">Fixing iServices</a></li><li><a href="/OpenCore-Post-Install/universal/pm.html" class="sidebar-link">Fixing Power Management</a></li><li><a href="/OpenCore-Post-Install/universal/sleep.html" class="sidebar-link">Fixing Sleep</a></li><li><a href="https://dortania.github.io/USB-Map-Guide/" target="_blank" rel="noopener noreferrer" class="sidebar-link">Fixing USB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>USB Fixes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/usb/" aria-current="page" class="sidebar-link">USB Mapping: Introduction</a></li><li><a href="/OpenCore-Post-Install/usb/system-preparation.html" class="sidebar-link">System Preparation</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>USB Mapping</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/usb/intel-mapping/intel.html" class="sidebar-link">Intel USB mapping</a></li><li><a href="/OpenCore-Post-Install/usb/amd-mapping/amd.html" aria-current="page" class="active sidebar-link">AMD and 3rd Party Mapping</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/usb/amd-mapping/amd.html#amd-and-3rd-party-usb-mapping" class="sidebar-link">AMD and 3rd Party USB Mapping</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/usb/amd-mapping/amd.html#creating-the-map" class="sidebar-link">Creating the map</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/usb/amd-mapping/amd.html#port-mapping-on-screwed-up-dsdts" class="sidebar-link">Port mapping on screwed up DSDTs</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/usb/amd-mapping/amd.html#port-mapping-when-you-have-multiple-of-the-same-controller" class="sidebar-link">Port mapping when you have multiple of the same controller</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Miscellaneous Fixes</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Laptop Specifics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/laptop-specific/battery.html" class="sidebar-link">Fixing Battery Read-outs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Cosmetics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/cosmetic/verbose.html" class="sidebar-link">Fixing Resolution and Verbose</a></li><li><a href="/OpenCore-Post-Install/cosmetic/gui.html" class="sidebar-link">Add GUI and Boot-chime</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Multiboot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/multiboot/bootstrap.html" class="sidebar-link">Setting up Bootstrap.efi</a></li><li><a href="/OpenCore-Post-Install/multiboot/bootcamp.html" class="sidebar-link">Installing BootCamp</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/misc/rtc.html" class="sidebar-link">Fixing RTC</a></li><li><a href="/OpenCore-Post-Install/misc/msr-lock.html" class="sidebar-link">Fixing CFG Lock</a></li><li><a href="/OpenCore-Post-Install/misc/nvram.html" class="sidebar-link">Emulated NVRAM</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-succinct-content content__default"><h1 id="usb-mapping"><a href="#usb-mapping" class="header-anchor">#</a> USB Mapping</h1> <p>Table of Contents:</p> <ul><li><a href="#amd-and-3rd-party-usb-mapping">AMD and 3rd Party USB Mapping</a></li> <li><a href="#creating-the-map">Creating the map</a></li> <li><a href="#port-mapping-on-screwed-up-dsdts">Port mapping on screwed up DSDTs</a></li> <li><a href="#port-mapping-when-you-have-multiple-of-the-same-controller">Port mapping when you have multiple of the same controller</a></li></ul> <p>So with the prerequisites out of the way, we can finally get to the meat of this guide. And now we get to finally read one of my favorite books before I go to bed each night: <a href="https://uefi.org/sites/default/files/resources/ACPI_6_3_final_Jan30.pdf" target="_blank" rel="noopener noreferrer">The Advanced Configuration and Power Interface (ACPI) Specification!<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Now if you haven't read through this before(which I highly recommend you do, it's a thrilling tale), I'll point you to the meat of the USB situation:</p> <ul><li>Section 9.14: _UPC (USB Port Capabilities)</li></ul> <p>Here we're greeted with all the possible USB ports in ACPI:</p> <table><thead><tr><th style="text-align:left;">Type</th> <th style="text-align:left;">Info</th> <th style="text-align:left;">Comments</th></tr></thead> <tbody><tr><td style="text-align:left;">0</td> <td style="text-align:left;">USB 2.0 Type-A connector</td> <td style="text-align:left;">This is what macOS will default all ports to when no map is present</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">USB 3.0 Type-A connector</td> <td style="text-align:left;">3.0, 3.1 and 3.2 ports share the same Type</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;">Type C connector - USB 2.0-only</td> <td style="text-align:left;">Mainly seen in phones</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 with Switch</td> <td style="text-align:left;">Flipping the device <strong>does not</strong> change the ACPI port</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 without Switch</td> <td style="text-align:left;">Flipping the device <strong>does</strong> change the ACPI port. generally seen on 3.1/2 motherboard headers</td></tr> <tr><td style="text-align:left;">255</td> <td style="text-align:left;">Proprietary connector</td> <td style="text-align:left;">For Internal USB ports like Bluetooth</td></tr></tbody></table> <h2 id="amd-and-3rd-party-usb-mapping"><a href="#amd-and-3rd-party-usb-mapping" class="header-anchor">#</a> AMD and 3rd Party USB Mapping</h2> <p>The steps are quite simple:</p> <ul><li>Read this guide</li> <li>Cry a bit</li> <li>Cry some more</li> <li>Buy some Intel hardware</li> <li>Return said hardware</li> <li>Gather courage to USB map on AMD</li> <li>Read the rest of the guide <em>again</em> and actually USB map</li></ul> <h2 id="creating-the-map"><a href="#creating-the-map" class="header-anchor">#</a> Creating the map</h2> <p>So to start off, open <a href="https://github.com/khronokernel/IORegistryClone/blob/master/ioreg-302.zip" target="_blank" rel="noopener noreferrer">IORegistryExplorer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and find the USB controller you'd wish to map. For controllers, they come in some variations:</p> <ul><li>XHC</li> <li>XHC0</li> <li>XHC1</li> <li>XHC2</li> <li>XHCI</li> <li>XHCX</li> <li>AS43</li> <li>PTXH (Commonly associated with AMD Chipset controllers)</li> <li>PTCP (Found on AsRock X399, in ACPI these ports are actually called PXTX but macOS will enumerate them differently)</li> <li>PXSX(This is a generic PCIe device, <strong>double check it's a USB device</strong>)</li></ul> <p>The best way to find controllers is by searching for <code>XHC</code> and then looking at the results that come up, the parent of all the ports is the USB controller. Do note that many boards have multiple controllers but the port limit is per controller.</p> <p>For today's example, we'll be both adding missing ports and getting under the 15 port limit for this X399 chipset which has the identifier <code>PTXH</code></p> <p><img src="/OpenCore-Post-Install/assets/img/controller-name.65fee9c7.png" alt="PTXH IOReg"></p> <p>As you can see from the photo above, we're missing a shit ton of ports! Specifically ports POT3, POT4, POT7, POT8, PO12, PO13, PO15, PO16, PO17, PO18, PO19, PO20, PO21, PO22!</p> <p>So how do we fix this? Well if you look in the corner you'll see the <code>port</code> value. This is going to be important to us when mapping</p> <p>Next, let's take a peek at our DSDT and check for our <code>PTXH</code> device with <a href="https://github.com/acidanthera/MaciASL/releases" target="_blank" rel="noopener noreferrer">maciASL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <table><thead><tr><th style="text-align:center;">Top of PTXH</th> <th style="text-align:center;">Bottom of PTXH</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="/OpenCore-Post-Install/assets/img/dsdt-1.9fd16334.png" alt=""></td> <td style="text-align:center;"><img src="/OpenCore-Post-Install/assets/img/dsdt-2.fcac4b17.png" alt=""></td></tr></tbody></table> <p>All of our ports are here! So why in the world is macOS hiding them? Well there's a couple of reasons but this being the main: Conflicting SMBIOS USB map</p> <p>Inside the <code>AppleUSBHostPlatformProperties.kext</code> you'll find the USB map for most SMBIOS, this means that that machine's USB map is forced onto your system.</p> <p>Well to kick out these bad maps, we gotta make a plugin kext. For us, that's the <a href="https://github.com/dortania/USB-Map-Guide/tree/master/extra-files/AMD-USB-Map.kext.zip" target="_blank" rel="noopener noreferrer">AMD-USB-Map.kext<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Now right-click and press <code>Show Package Contents</code>, then navigate to <code>Contents/Info.plist</code></p> <p><img src="/OpenCore-Post-Install/assets/img/usb-plist.54e7635e.png" alt="">
If the port values don't show in Xcode, right click and select <code>Show Raw Keys/Values</code> <img src="/OpenCore-Post-Install/assets/img/usb-plist-info.85a0cf5e.png" alt=""></p> <p>So what kind of data do we shove into this plist? Well, there are a couple of sections to note:</p> <ul><li><strong>Model</strong>: SMBIOS the kext will match against, set this up to what SMBIOS you are currently using</li> <li><strong>IONameMatch</strong>: The name of the controller it'll match against, in this example we'll use <code>PTXH</code> <ul><li>IOPathMatch is another entry you can use instead, if you have multiple controllers with the same name(ie. 2 XHC0)</li></ul></li> <li><strong>port-count</strong>: The last/largest port value that you want to be injected</li> <li><strong>port</strong>: The address of the USB controller</li> <li><strong>UsbConnector</strong>: The type of USB connector, which can be found on the <a href="https://uefi.org/sites/default/files/resources/ACPI_6_3_final_Jan30.pdf" target="_blank" rel="noopener noreferrer">ACPI 6.3 spec, section 9.14<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>How do I know which ports are 2.0 and which are 3.0?</p></blockquote> <p>Well, the easiest way is grabbing a USB 2.0 and USB 3.0 device, then write down which ports are are what type from observing IOReg.</p> <ul><li><strong>Remember</strong>: USB 3.0 ports have dual personalities, so you <strong>must</strong> test both a 2.0 drive and 3.0 to know which ports are associated with it in IOReg.</li></ul> <p>Now, let's take this section:</p> <div class="language- extra-class"><pre class="language-text"><code>Device (PO18)
   {
   Name (_ADR, 0x12) // _ADR: Address
   Name (_UPC, Package (0x04) // _UPC: USB Port Capabilities
      {
         Zero,
         0xFF,
         Zero,
         Zero
      })
   }
</code></pre></div><p>For us, what matters is the <code>Name (_ADR, 0x12) // _ADR: Address</code> as this tells us the location of the USB port. This value will be turned into our <code>port</code> value on the plist. Some DSDTs don't declare their USB address, for these situations we can see their IOReg properties.</p> <p><img src="/OpenCore-Post-Install/assets/img/port-info.64852be6.png" alt=""></p> <p><strong>Reminder</strong>: Don't drag and drop the kext, read the guide carefully. Rename <code>IONameMatch</code> value to the correct controller you're wanting to map and verify that the ports are named correctly to <strong>your DSDT</strong>. If you could drag and drop it and have it work for everyone there wouldn't be a guide ;p</p> <p>Now save and add this to both your kext folder and config.plist then reboot!</p> <p>Now we can finally start to slowly remove unwanted ports from the Info.plist and remove the <code>XhciPortLimit</code> quirk once you have 15 ports total or less per controller.</p> <h2 id="port-mapping-on-screwed-up-dsdts"><a href="#port-mapping-on-screwed-up-dsdts" class="header-anchor">#</a> Port mapping on screwed up DSDTs</h2> <p>Something you may have noticed is that your DSDT is even missing some ports, like for example:</p> <p><img src="/OpenCore-Post-Install/assets/img/dsdt-missing.fdae3b86.png" alt="AsRock B450 missing ports"></p> <p>In this DSDT, we're missing HS02, HS03, HS04, HS05, etc. When this happens, we actually need to outright remove all our ports from that controller in our DSDT. What this will let us do is allow macOS to build the ports itself instead of basing it off of the ACPI. Save this modified DSDT.aml and place it in your EFI/OC/ACPI folder and specify it in your config.plist -&gt; ACPI -&gt; Add(note that DSDT.aml must be forced to work correctly)</p> <h2 id="port-mapping-when-you-have-multiple-of-the-same-controller"><a href="#port-mapping-when-you-have-multiple-of-the-same-controller" class="header-anchor">#</a> Port mapping when you have multiple of the same controller</h2> <p>This becomes a problem when we run systems with many USB controllers which all want to have the same identifier, commonly being multiple XHC0 devices or AsMedia controllers showing up as generic PXSX devices. To fix this, we have 3 options:</p> <ul><li>IOPathMatch property</li> <li>ACPI Rename (won't be covered in this guide, see ACPI section of OpenCore's configuration.pdf)</li> <li>SSDT Recreation</li></ul> <h3 id="iopathmatch-property"><a href="#iopathmatch-property" class="header-anchor">#</a> IOPathMatch property</h3> <p>Actually quite simple, grab the sample USBmap.kext we provided earlier and look for the IONameMatch Property. Now rename this to IOPathMatch.</p> <p>Finally, grab IOreg and look for your USB controller:</p> <p><img src="/OpenCore-Post-Install/assets/img/iopathmatch.ce488cb3.png" alt=""></p> <p>From here, pay very close attention to which actual device I selected. Specifically the parent of <code>XHC0@61000000</code> being <code>XHC0@0,3</code>, reason for this is that's our actual USB controller. The child with the same name is actually a root hub but does not concern us</p> <p>Now copy the <code>XHC0@0,3</code> entry and paste it back into the <code>IOPathMatch</code> entry in our USBmap.kext's info.plist, this should result in quite a long path name:</p> <div class="language- extra-class"><pre class="language-text"><code>IOService:/AppleACPIPlatformExpert/PCI0@0/AppleACPIPCI/D0C0@7,1/IOPP/XHC0@0,3
</code></pre></div><p>And once done your USBmap's IOPathMatch should look like this:</p> <p><img src="/OpenCore-Post-Install/assets/img/path-match-config.77d4f18a.png" alt=""></p> <h3 id="ssdt-recreation"><a href="#ssdt-recreation" class="header-anchor">#</a> SSDT Recreation</h3> <p>With the SSDT Recreation method, what we'll be doing is &quot;renaming&quot; the device but in reality creating a brand new device just for macOS that is in the exact same spot as your old USB controller.</p> <p>To do this, grab the following SSDT:</p> <ul><li><a href="https://github.com/dortania/USB-Map-Guide/tree/master/extra-files/SSDT-SHC0.dsl" target="_blank" rel="noopener noreferrer">SSDT-SHC0.dsl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>What you'll want to do is find a controller you want to rename, find its full ACPI path and replace the one in the sample SSDT. In our sample, we're be renaming <code>PCI0.GP13.XHC0</code> to <code>SHC0</code> so change accordingly.</p> <p><img src="/OpenCore-Post-Install/assets/img/rename-ssdt.b8295b52.png" alt="AsRock B450 missing ports"></p> <p><strong>Note</strong>: In rare cases, macOS isn't able to properly rebuild the USB ports with the new &quot;fake&quot; USB controller. In these situations we need to manually add ports to it that are present in the original controller(ie. HS01, HS02, POT1, etc)</p> <blockquote><p>But how do I map a non-standard controller that shows up as PXSX?</p></blockquote> <p>Similar idea to regular SSDT renaming except you need to actually find the controller. This becomes difficult as SSDs, network controllers, and other generic PCIe devices can also show up as PXSX. Check the ACPI-path in IOreg to find its path:</p> <p><img src="/OpenCore-Post-Install/assets/img/acpi-path.b5562f4f.png" alt=""></p> <p>As we can see, <code>IOACPIPlane:/_SB/PC00@0/RP05@1c0004/PXSX@0</code> would be interpreted as <code>SB.PC00.RP05.PXSX</code></p> <p>And so from the above SSDT, we change the following:</p> <ul><li><code>External (_SB_.PCI0.GP13, DeviceObj)</code> -&gt; <code>External (_SB_.PC00.RP05, DeviceObj)</code></li> <li><code>External (_SB_.PCI0.GP13.XHC0, DeviceObj)</code> -&gt; <code>External (_SB_.PC00.RP05.PXSX, DeviceObj)</code></li> <li><code>Scope (\_SB.PCI0.GP13)</code> -&gt; <code>Scope (\_SB.PC00.RP05)</code></li> <li><code>Scope (XHC0)</code> -&gt; <code>Scope (PXSX)</code></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/16/2020, 1:56:04 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ⟵
      <a href="/OpenCore-Post-Install/usb/intel-mapping/intel.html" class="prev">
        Intel USB mapping
      </a></span> <span class="next"><a href="/OpenCore-Post-Install/usb/misc/power.html">
        Fixing USB Power
      </a>
      ⟶
    </span></p></div> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div><!----></div></div>
    <script src="/OpenCore-Post-Install/assets/js/app.02766a6e.js" defer></script><script src="/OpenCore-Post-Install/assets/js/2.a6c1b66e.js" defer></script><script src="/OpenCore-Post-Install/assets/js/3.d6f68cc8.js" defer></script><script src="/OpenCore-Post-Install/assets/js/28.32d25b57.js" defer></script>
  </body>
</html>
